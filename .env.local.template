# Copy this file to `.env` for local development with the bundled MongoDB.
#
# 1. cp .env.local.template .env
# 2. docker compose --profile localdb up --build

# Application identity
APP_NAME=finance-management
APP_SUBDOMAIN=finance
BASE_DOMAIN=localhost

# Runtime networking
WEB_PORT=3000
API_PORT=5000
NODE_ENV=development

# Backend configuration
# Note: Do NOT include the database name here.
MONGO_URI=mongodb://root:example@finance-management-db:27017/?authSource=admin
# Example for External Database (e.g., MongoDB Atlas):
# MONGO_URI=mongodb+srv://user:password@cluster.mongodb.net/?retryWrites=true&w=majority

MONGO_DB_NAME=finance
MONGO_CONNECT_MAX_RETRIES=5
MONGO_CONNECT_RETRY_DELAY_MS=5000

# Redis
REDIS_URL=redis://finance-management-redis:6379

# Authentication
NEXTAUTH_URL=http://finance.localhost
NEXTAUTH_SECRET=dev_secret_do_not_use_in_prod
AUTH_BACKEND_URL=http://finance-management-api:5000
AUTH_REFRESH_PATH=/api/users/refresh-token
AUTH_REDIS_PREFIX=auth:v1
AUTH_KEY_SALT=dev_salt_do_not_use_in_prod
REGISTER_TIMEOUT_MS=15000
PROXY_TIMEOUT_MS=15000
PASSWORD_RESET_TIMEOUT_MS=15000
NEXT_PUBLIC_PASSWORD_RESET_REDIRECT_URL=http://finance.localhost/reset-password

# PDF Generation Service
PDF_QUEUE_REDIS_URL=redis://finance-management-redis:6379
PDF_QUEUE_NAME=summary-pdf
PDF_JOB_RESPONSE_TIMEOUT_MS=45000
PDF_JOB_PROCESS_TIMEOUT_MS=120000

# Email (Mailhog or similar for dev)
EMAIL_HOST=mailhog
EMAIL_PORT=1025
EMAIL_USER=user@example.com
EMAIL_PASS=password
EMAIL_FROM=noreply@example.com
EMAIL_SECURE=false
EMAIL_TLS_REJECT_UNAUTHORIZED=false

# CORS
CORS_ALLOWED_ORIGINS=http://finance.localhost

# Uploads
UPLOADS_ROOT=/app/uploads

# Backup Configuration
RESTIC_PASSWORD="dev_password"
RESTIC_REPOSITORY="/repo"

# Restore Configuration (Optional)
# RESTORE_SOURCE_DB=finance_management
# RESTORE_TARGET_DB=finance

